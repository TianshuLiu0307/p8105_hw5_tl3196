p8105_hw5_tl3196
================
Tianshu Liu

## Problem 1

Import and tidy data from csv files.

``` r
# generate file list
file_path = "./data/con_exp_data/"
file_list = list.files(path = file_path, full.names = FALSE)

# import and tidy data
con_exp_df =
  expand_grid(
    sample = file_list
  ) %>% 
  mutate(
    data = purrr::map(
      .x = file_list, 
      ~read_csv(file = str_c(file_path, .x))),
    sample = str_sub(sample, end = -5)
  ) %>% 
   separate(
     col = sample, sep = '_', 
     into = c("arm", "id"),
     remove = FALSE
  ) %>% 
  unnest(data) %>% 
  pivot_longer(
    cols = week_1:week_8,
    names_to = "week",
    names_prefix = "week_",
    values_to = "observation"
  )

con_exp_df
```

    ## # A tibble: 160 × 5
    ##    sample arm   id    week  observation
    ##    <chr>  <chr> <chr> <chr>       <dbl>
    ##  1 con_01 con   01    1            0.2 
    ##  2 con_01 con   01    2           -1.31
    ##  3 con_01 con   01    3            0.66
    ##  4 con_01 con   01    4            1.96
    ##  5 con_01 con   01    5            0.23
    ##  6 con_01 con   01    6            1.09
    ##  7 con_01 con   01    7            0.05
    ##  8 con_01 con   01    8            1.94
    ##  9 con_02 con   02    1            1.13
    ## 10 con_02 con   02    2           -0.88
    ## # … with 150 more rows

Make a spaghetti plot for the tidy data.

``` r
# spaghetti plot
con_exp_df %>% 
  ggplot(aes(x = week, y = observation, group = sample, color = sample)) + 
  geom_point(aes(shape = arm), alpha = .7) + 
  geom_line(aes(linetype = arm), alpha = .7)
```

<img src="p8105_hw5_tl3196_files/figure-gfm/spaghetti_plot-1.png" width="90%" />

From the plot, we can identify that there are not significant difference
between participants in the two arms at the beginning of the study.
Participants in the experimental arm have significant increasing trend
on observations, while participants in the control arm almost remain the
same as the beginning. With this trend, the difference between the two
arms becomes more and more significant. From the 7th week, all
participants in the experimental arm have higher observation than all
participants in the control arm. Therefore, compared to the control arm,
the experimental arm has significant increase in observations.
